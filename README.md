# stm32f1-joystick

Небольшая библиотека для работы с аналоговым джойстиком (2 оси + кнопка) на STM32F1.
Написана на C++ с использованием CMSIS

## Возможности

- Чтение осей X и Y через ADC1

- Чтение состояния кнопки на джойстике

- Настройка мертвой зоны

- Калибровка нуля

## Установка

Для полной установки достаточно скачать репозиторий на компьютер и собрать проект с помощью CMake.

Все зависимости уже включены. 

*stm32f1_uart нужен только для вывода данных с джойстика в терминал, т.е. не является зависимостью*

## Использование 

```cpp

#include "stm32f1_joystick.hpp"

#define A0  {GPIOA, 0} //X-axis
#define A1  {GPIOA, 1} //Y-axis
#define A2  {GPIOA, 2} //Button

Joystick joy;

int main()
{
    //Пока что необходимо включить порты для пинов джойстика вручную(
    RCC->APB2ENR |= RCC_APB2ENR_IOPAEN;

    //Инициализация джойстика
    joy.init(A0, A1, A2);

    //Установка мертвой зоны по обоим осям
    joy.setDeadzone(15);

    //Получить отклонение джойстика по X в диапазоне [-255, 255]
    int8_t valueX = joy.getX();

    //Получить отклонение джойстика по Y в диапазоне [-255, 255]
    int8_t valueY = joy.getY();

    //Получить состояние кнопки джойстика
    uint8_t button = joy.isPressed();
}

```

## ВЕРСИЯ

- V0.1 - Базовый функционал: getX, getY, setDeadzone
